<% content_for :header  do %>
<meta name="tmt:artist:lastfm:updated_at" content="<%= @artist.last_lastfm_update %>">
<meta name="tmt:artist:musicbrainz:updated_at" content="<%= @artist.last_mb_update %>">
<meta name="tmt:artist:entity:updated_at" content="<%= @artist.updated_at %>">
<% end %>

<%= render partial: "backdrop", locals: {entity: @artist} %>

<h1><%= link_to @artist.name, @artist.slug %></h1>

<section class="container-fluid discography">
    <h2>Discography</h2>
    <% if !@artist.albums.empty? %>
    <div class="row">
    <% @artist.albums.each do |album| %>
        <div class="col-xs-6 col-sm-4 col-md-3 tile tile-album">
            <%= link_to image_tag(album.get_thumbnail_url, class: "thumb", alt: album.title, title: album.title), controller: :albums, action: :show, id: album.slug %>
            <h3><%= link_to album.title, controller: :albums, action: :show, id: album.slug %></h3>
        </div>
    <% end %>
    </div>

    <% elsif @artist.last_mb_update.nil? %>
        <p><%= t "The discography is still being processed Sorry for the inconvenience" %></p>
    <% else %>
        <p><%= t "The artist does not seem to have official releases" %></p>
    <% end %>
</section>

<section class="container-fluid similar-artists">
    <h2>Similar artists</h2>
    <div class="row">
    <% @artist.similar_artists.each do |similar_artist| %>
        <div class="col-xs-6 col-sm-4 col-md-3 tile tile-artist">
            <%= link_to image_tag(similar_artist.get_thumbnail_url, class: "thumb", alt: similar_artist.name, title: similar_artist.name), controller: :artists, action: :show, id: similar_artist.slug %>
            <h3><%= link_to similar_artist.name, controller: :artists, action: :show, id: similar_artist.slug %></h3>
        </div>
    <% end %>
    </div>
</section>
